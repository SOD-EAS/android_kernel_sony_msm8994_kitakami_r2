CONFIG_AHC=y
CONFIG_ALLOC_BUFFERS_IN_4K_CHUNKS=y
CONFIG_AMSS_ERR_LOG=y
CONFIG_ARCH_SONY_KITAKAMI=y
CONFIG_BALANCE_ANON_FILE_RECLAIM=y
CONFIG_BCMDHD_PCIE=y
CONFIG_BCM_WLAN_RAMDUMP=y
CONFIG_BT_BCM43XX=y
# CONFIG_CFG80211_INTERNAL_REGDB is not set
# CONFIG_CHR_DEV_SCH is not set
# CONFIG_CHR_DEV_SG is not set
CONFIG_CIFS=y
# CONFIG_CNSS is not set
# CONFIG_CORESIGHT is not set
CONFIG_CRASH_NOTES=y
CONFIG_DEBUG_BUGVERBOSE=y
CONFIG_DYNAMIC_DEBUG=y
# CONFIG_EXT2_FS is not set
# CONFIG_EXT3_FS is not set
CONFIG_FB_MSM_LOGO=y
CONFIG_FB_MSM_MDSS_SPECIFIC_PANEL=y
#CONFIG_FB_MSM_MDSS_XLOG_DEBUG=y
CONFIG_HID_LOGITECH=y
CONFIG_HID_PANTHERLORD=y
CONFIG_HID_SONY=y
# CONFIG_IKCONFIG_PROC is not set
CONFIG_INET_XFRM_MODE_BEET=y
CONFIG_INPUT_BU520X1NVX=y
# CONFIG_INPUT_EVBUG is not set
# CONFIG_INPUT_HBTP_INPUT is not set
CONFIG_IOMMU_FORCE_4K_MAPPINGS=y
CONFIG_IP_MULTICAST=y
CONFIG_UID_STAT=y
CONFIG_JOYSTICK_XPAD_LEDS=y
CONFIG_LDO_VIBRATOR=y
# CONFIG_LEDS_QPNP_FLASH is not set

# CONFIG_MII is not set
CONFIG_MMC_BLOCK_DEFERRED_RESUME=y
CONFIG_MMC_CMD_DEBUG=y
CONFIG_MSM_BCL_SOMC_CTL=y
# CONFIG_MSM_BT_POWER is not set
# CONFIG_MSM_DLOAD_MODE is not set
CONFIG_MSM_FORCE_PANIC_ON_WDOG_BARK=y
CONFIG_MSM_FORCE_WDOG_BITE_ON_PANIC=y
CONFIG_MSM_RTB=y
CONFIG_MSM_TZ_LOG=y
# CONFIG_NFC_QNCI is not set
CONFIG_NLS_UTF8=y
# CONFIG_PFT is not set
# CONFIG_PHYLIB is not set
CONFIG_PINCTRL_SOMC=y
CONFIG_PMI8994_FLASH=y
CONFIG_PON_SOMC_ORG=y
CONFIG_POWERKEY_FORCECRASH=y
CONFIG_QPNP_FG_EXTENSION=y
# CONFIG_QPNP_HAPTIC is not set
CONFIG_QPNP_SMBCHARGER_EXTENSION=y
CONFIG_RAMDUMP_MEMDESC=y
CONFIG_RAMDUMP_TAGS=y
# CONFIG_SCSI_CONSTANTS is not set
# CONFIG_SCSI_LOGGING is not set
# CONFIG_SCSI_MULTI_LUN is not set
CONFIG_SECURITYFS=y
CONFIG_SECURITY_SELINUX_AVC_EXTRA_INFO=y
CONFIG_SECURITY_SELINUX_BOOTPARAM=y
CONFIG_SECURITY_SELINUX_TRAP=y
CONFIG_SECURITY_SONY_RIC=y
CONFIG_SERIAL_MSM_HSL=y
CONFIG_SIM_DETECT=y
CONFIG_SOMC_LCD_OCP_ENABLED=y
CONFIG_SOMC_WIFI_CONTROL=y
CONFIG_SONY_CAM_V4L2=y
CONFIG_SONY_SSM=y
CONFIG_STRICT_DEVMEM=y
CONFIG_TOUCHSCREEN_CLEARPAD=y
# CONFIG_TOUCHSCREEN_SYNAPTICS_DSX_v21 is not set
# CONFIG_USB_ACM is not set
# CONFIG_USB_CCID_BRIDGE is not set
# CONFIG_USB_CI13XXX_MSM is not set
# CONFIG_USB_GADGET_DEBUG_FS is not set
CONFIG_USB_HOST_EXTRA_NOTIFICATION=y

# CONFIG_USB_MON is not set
# CONFIG_USB_STORAGE_ALAUDA is not set
# CONFIG_USB_STORAGE_CYPRESS_ATACB is not set
# CONFIG_USB_STORAGE_DATAFAB is not set
# CONFIG_USB_STORAGE_FREECOM is not set
# CONFIG_USB_STORAGE_ISD200 is not set
# CONFIG_USB_STORAGE_JUMPSHOT is not set
# CONFIG_USB_STORAGE_KARMA is not set
# CONFIG_USB_STORAGE_SDDR09 is not set
# CONFIG_USB_STORAGE_SDDR55 is not set
# CONFIG_USB_STORAGE_USBAT is not set
# CONFIG_USB_USBNET is not set
# CONFIG_USB_VIDEO_CLASS is not set
CONFIG_VFAT_FS_NO_DUALNAMES=y
CONFIG_WAKEUP_IRQ_DEBUG=y
# CONFIG_WCNSS_MEM_PRE_ALLOC is not set
CONFIG_XFRM_RFC_4868_TRUNCATION=y
CONFIG_Z3FOLD=y
# CONFIG_BCMDHD_DEBUG_PAGEALLOC is not set
CONFIG_BCMDHD_PREALLOC_PKTIDMAP=y
CONFIG_BROADCOM_WIFI_RESERVED_MEM=y
CONFIG_CIFS_DEBUG=y
# CONFIG_CIFS_DEBUG2 is not set
# CONFIG_CIFS_DFS_UPCALL is not set
# CONFIG_CIFS_SMB2 is not set
# CONFIG_CIFS_STATS is not set
# CONFIG_CIFS_UPCALL is not set
# CONFIG_CIFS_WEAK_PW_HASH is not set
# CONFIG_CIFS_XATTR is not set
CONFIG_CRASH_LAST_LOGS=y
# CONFIG_DEFAULT_SECURITY_SONY is not set
CONFIG_EXT4_USE_FOR_EXT23=y
# CONFIG_HID_LOGITECH_DJ is not set
# CONFIG_IP_MROUTE is not set
# CONFIG_LOGIG940_FF is not set
# CONFIG_LOGIRUMBLEPAD2_FF is not set
# CONFIG_LOGITECH_FF is not set
# CONFIG_LOGIWHEELS_FF is not set
# CONFIG_MACH_SONY_AOI is not set
# CONFIG_MACH_SONY_AOI_VZW is not set
# CONFIG_MACH_SONY_CDB is not set
# CONFIG_MACH_SONY_CDB2 is not set
# CONFIG_MACH_SONY_IVY is not set
# CONFIG_MACH_SONY_IVY_DCM is not set
# CONFIG_MACH_SONY_IVY_DSDS is not set
# CONFIG_MACH_SONY_IVY_KDDI is not set
# CONFIG_MACH_SONY_IVY_SBM is not set
# CONFIG_MACH_SONY_IVY_VZW is not set
# CONFIG_MACH_SONY_KARIN is not set
# CONFIG_MACH_SONY_KARIN_DCM is not set
# CONFIG_MACH_SONY_KARIN_KDDI is not set
# CONFIG_MACH_SONY_KARIN_WINDY is not set
# CONFIG_MACH_SONY_SATSUKI is not set
# CONFIG_MACH_SONY_SATSUKI_DCM is not set
# CONFIG_MACH_SONY_SATSUKI_DSDS is not set
# CONFIG_MACH_SONY_SUMIRE is not set
# CONFIG_MACH_SONY_SUMIRE_DCM is not set
# CONFIG_MACH_SONY_SUMIRE_DSDS is not set
# CONFIG_MACH_SONY_SUMIRE_KDDI is not set
# CONFIG_MACH_SONY_SUMIRE_SAMBA is not set
# CONFIG_MACH_SONY_SUMIRE_SBM is not set
# CONFIG_MACH_SONY_SUZURAN is not set
# CONFIG_MACH_SONY_SUZURAN_DCM is not set
CONFIG_MMC_CMD_QUEUE_SIZE=256
CONFIG_MSM_RTB_SEPARATE_CPUS=y
# CONFIG_PANTHERLORD_FF is not set
CONFIG_SECURITY_SELINUX_BOOTPARAM_VALUE=1
CONFIG_SERIAL_CORE_CONSOLE=y
CONFIG_SERIAL_MSM_HSL_CONSOLE=y
CONFIG_TOUCHSCREEN_CLEARPAD_I2C=y
CONFIG_TOUCHSCREEN_CLEARPAD_RMI_DEV=y

CONFIG_LOCALVERSION="-32.4.A.1.54_Logos_I.1_7_5"
CONFIG_LOCALVERSION_AUTO=n

# bigger buffer for dmesg - default one is too small to get meaningful data
CONFIG_LOG_BUF_SHIFT=21
CONFIG_OOPS_LOG_BUF_SHIFT=19

CONFIG_NLS_CODEPAGE_852=y
CONFIG_NLS_ISO8859_15=y

# Persistent store support
CONFIG_PSTORE=y
CONFIG_PSTORE_CONSOLE=y
CONFIG_PSTORE_PMSG=y
CONFIG_PSTORE_RAM=y

CONFIG_BALANCE_ANON_FILE_RECLAIM=y
# CONFIG_PM_SYNC_BEFORE_SUSPEND is not set
CONFIG_ARCH_SUPPORTS_MSI=y
CONFIG_ARCH_THREAD_INFO_ALLOCATOR=y

CONFIG_STRICT_MEMORY_RWX=y

# KSM related stuff
# CONFIG_KSM is not set

# MEMCG related stuff
CONFIG_MEMCG=y
# CONFIG_MEMCG_KMEM is not set
CONFIG_MEMCG_SWAP=y
CONFIG_MEMCG_SWAP_ENABLED=y
CONFIG_MM_OWNER=y

# LMK TNG + LMK Statistics + OOM score notifier
CONFIG_ANDROID_LOW_MEMORY_KILLER=y
CONFIG_ANDROID_LOW_MEMORY_KILLER_TNG=y

# kswapd: limit it to the first 4 cores
# by doing so also avoid an error/issue with vmscan
CONFIG_KSWAPD_CPU_AFFINITY_MASK="f"

CONFIG_NTFS_FS=y
CONFIG_NTFS_RW=y

# exfat opensource driver
CONFIG_EXFAT_FS=y
CONFIG_EXFAT_DEFAULT_CODEPAGE=437
CONFIG_EXFAT_DEFAULT_IOCHARSET="utf8"
# CONFIG_EXFAT_VIRTUAL_XATTR is not set
CONFIG_EXFAT_DISCARD=y
CONFIG_EXFAT_COMPAT_TUXERA=y
# CONFIG_EXFAT_DEBUG is not set

# eCrypt filesystem
CONFIG_ECRYPT_FS=m
CONFIG_WTL_ENCRYPTION_FILTER=y

# Broadcom built-in bluetooth driver
CONFIG_BT_PROTOCOL_DRIVER=m
CONFIG_LINE_DISCIPLINE_DRIVER=m
CONFIG_V4L2_ANT_DRIVER=m
CONFIG_V4L2_FM_DRIVER=m

# TCP Algorithms
CONFIG_TCP_CONG_ADVANCED=y
CONFIG_TCP_CONG_BIC=y
CONFIG_TCP_CONG_CUBIC=y
CONFIG_TCP_CONG_WESTWOOD=y
CONFIG_TCP_CONG_HTCP=y
CONFIG_TCP_CONG_HSTCP=y
CONFIG_TCP_CONG_HYBLA=y
CONFIG_TCP_CONG_VEGAS=y
CONFIG_TCP_CONG_SCALABLE=y
CONFIG_TCP_CONG_LP=y
CONFIG_TCP_CONG_VENO=y
CONFIG_TCP_CONG_YEAH=y
CONFIG_TCP_CONG_ILLINOIS=y
CONFIG_DEFAULT_WESTWOOD=y

#
# DEVFREQ Governors
#
CONFIG_DEVFREQ_GOV_SIMPLE_ONDEMAND=y
CONFIG_DEVFREQ_GOV_PERFORMANCE=y
CONFIG_DEVFREQ_GOV_POWERSAVE=y
CONFIG_DEVFREQ_GOV_USERSPACE=y
CONFIG_DEVFREQ_GOV_CPUFREQ=y
CONFIG_DEVFREQ_GOV_MSM_ADRENO_TZ=y
CONFIG_MSM_BIMC_BWMON=y
CONFIG_DEVFREQ_GOV_MSM_GPUBW_MON=y
CONFIG_DEVFREQ_GOV_MSM_BW_HWMON=y
# CONFIG_DEVFREQ_GOV_MSM_CACHE_HWMON is not set
CONFIG_DEVFREQ_GOV_SPDM_HYP=y

#
# DEVFREQ Drivers
#
CONFIG_DEVFREQ_SIMPLE_DEV=y
CONFIG_MSM_DEVFREQ_DEVBW=y
# CONFIG_SPDM_SCM is not set
CONFIG_DEVFREQ_SPDM=y

# Adreno-Idler
CONFIG_ADRENO_IDLER=y

# CMA, allocating framebuffer, etc. memory [CMA_SIZE_MBYTES 16 -> 32]
CONFIG_CMA_SIZE_MBYTES=32

# Enable Panic on data corruption, if there's data corruption we better
# crash the system as soon as it occurs, otherwise the context is lost
# to track the (potentially fixable) origin down, also it's a
# surefire way to screw up the system anyway
CONFIG_PANIC_ON_DATA_CORRUPTION=y

# watchdog related setup, prefer bark over panicking instantly
# CONFIG_MSM_FORCE_PANIC_ON_WDOG_BARK is not set

# Disable MMC CMD debug feature
# CONFIG_MMC_CMD_DEBUG is not set

# Print scheduling debugging info from sysrq-trigger
# CONFIG_SYSRQ_SCHED_DEBUG is not set

# Misc
CONFIG_AIO_SSD_ONLY=y

# Build module externally
# CONFIG_WIL6210 is not set
CONFIG_INPUT_GPIO=m
CONFIG_DVB_MPQ=m
CONFIG_DVB_MPQ_DEMUX=m
CONFIG_TSPP=m

# MHL SII8620 and SII8061 support (Sony Stock ROM: build as module, Makefile hack)
# only this way stability & functionality is warranted
CONFIG_FB_MSM_MDSS_HDMI_MHL_SII8620_8061=y

# RCU Subsystem
#
CONFIG_TREE_PREEMPT_RCU=y
CONFIG_PREEMPT_RCU=y
CONFIG_RCU_STALL_COMMON=y
CONFIG_RCU_FANOUT=64
CONFIG_RCU_FANOUT_LEAF=16
# CONFIG_RCU_FANOUT_EXACT is not set
CONFIG_RCU_FAST_NO_HZ=y
# CONFIG_TREE_RCU_TRACE is not set
# CONFIG_RCU_BOOST is not set
CONFIG_RCU_KTHREAD_PRIO=15
CONFIG_RCU_BOOST_DELAY=331
CONFIG_RCU_NOCB_CPU=y
# CONFIG_RCU_NOCB_CPU_NONE is not set
# CONFIG_RCU_NOCB_CPU_ZERO is not set
CONFIG_RCU_NOCB_CPU_ALL=y

CONFIG_HAVE_CC_STACKPROTECTOR=y
CONFIG_CC_STACKPROTECTOR=y
# CONFIG_CC_STACKPROTECTOR_NONE is not set
CONFIG_CC_STACKPROTECTOR_REGULAR=y
# NOPE(?): potentially causes deterioration of sound output quality
# can be mitigated via DSEE HX & high resistance headphones
# raises coverage of functions from ~ 2.2% to 20+%
# see: 
# https://outflux.net/blog/archives/2014/01/27/fstack-protector-strong/
# https://mudongliang.github.io/2016/05/24/stack-protector.html
# https://wiki.debian.org/Hardening
# http://man7.org/linux/man-pages/man1/dpkg-buildflags.1.html
# CONFIG_CC_STACKPROTECTOR_STRONG is not set

# SLUB debugging, SLUB allocator validation checking
CONFIG_SLUB_DEBUG=y

# needs additional patches to cut down latency & other issues
CONFIG_PM_WAKELOCKS_GC=y
# CONFIG_WQ_POWER_EFFICIENT_DEFAULT is not set

# CONFIG_CNSS is not set
# CONFIG_CNSS_PCI is not set

# let's temporarily disable Mirrorlink & MobiCore [boot bringup, stability, etc. testing]
CONFIG_USB_MIRRORLINK=y
CONFIG_MOBICORE_SUPPORT=m
CONFIG_MOBICORE_API=m

# disable 32bit support / ARMv7 cruft
# CONFIG_ARMV7_COMPAT is not set
# CONFIG_SWP_EMULATE is not set

# disable unsupported, old, unnecessary stuff
# disable CONFIG_PFT as it is unsupported [vulnerability, SELinux compromised]
# Disable the drivers/platform/msm/pft.c driver as it is unsupported by
# Qualcomm, and opens us up to a wide range of potential attack surfaces
# that has not been audited by anyone.
# 
# Qualcomm recommends that it be disabled, as it hooks into SELinux in
# some "interesting" ways, and the userspace portion of the code is not
# even part of the image.
#
# CONFIG_PFT is not set

# disable MMC test [data loss, vulnerability]
# Development driver that performs a series of reads and writes to a memory card in order to expose
# certain well known bugs in host controllers. The tests are executed by writing to the "test" file
# in debugfs under each card. Note that whatever is on your card will be overwritten by these tests.
# 
# CONFIG_MMC_TEST is not set
# CONFIG_MMC_BLOCK_TEST is not set

# disable SCSI UFS test driver
# This adds UFS Host controller unit-test framework.
# The UFS unit-tests register as a block device test utility to
# the test-iosched and will be initiated when the test-iosched will
# be chosen to be the active I/O scheduler.
#
# CONFIG_SCSI_UFS_TEST is not set
# CONFIG_IOSCHED_TEST is not set

# "enables malware protection component to log on-device software API activity"
# costs performance, perhaps drains battery and other things
# does this daemon even run ? or is it already deprecated and cruft ?!
# CONFIG_SEEMP_CORE is not set

# disable support for printing out the last state upon modem failure
# (sensitive data, also: non-Stock ROM, thus useless)
# CONFIG_AMSS_ERR_LOG is not set

# Sensors (SSC), needed for adaptive (automagic) brightness
# CONFIG_SENSORS is not set
CONFIG_SENSORS_SSC=y

# Webcam devices
# disable GSPCA external module drivers
# 
# CONFIG_USB_VIDEO_CLASS is not set
# CONFIG_USB_GSPCA is not set

# Disable /dev/port access "should not be used when PCI is being used"
# On arm64 systems, using /dev/port does not really make sense; this is
# historically used for other architectures to access ISA IO ports, which
# with any luck do not exist on arm64 platforms.  With the following snippet
# of perl code (from Jeff Bastian <jbastian@redhat.com>), we can reliably
# panic an arm64 system with PCI enabled:
#
	#!/usr/bin/perl -w
	# extracted from sensors-detect from lm_sensors
	# to reproduce kernel crash when probing the
	# Super-I/O ports
#	use Fcntl qw(:DEFAULT :seek);
#	sysopen(IOPORTS, "/dev/port", O_RDWR);
#	binmode(IOPORTS);
#	sysseek(IOPORTS, 0x2e, 0);
#	syswrite(IOPORTS, pack("C", 0x0d), 1);
#
#So, make sure CONFIG_DEVPORT cannot be set on arm64; it cannot really be
# used and it allows us to crash a kernel from user space.
#
# CONFIG_DEVPORT is not set

# only set evdev, NOT set evbug, keyreset, keycombo
#
CONFIG_INPUT_EVDEV=y
# CONFIG_INPUT_EVBUG is not set
# CONFIG_INPUT_KEYRESET is not set
# CONFIG_INPUT_KEYCOMBO is not set

# disable Ultrasound
#
# CONFIG_MSM_ULTRASOUND is not set

# disable support for Field firmware updates (FFU)
# there's not subsequent updates from Sony anymore
# keep it off [attack surface & issues, etc.]
#
# CONFIG_MMC_FFU is not set

#
# SPI Protocol Masters
#
CONFIG_SPI_SPIDEV=m
# CONFIG_SPI_TLE62X0 is not set
CONFIG_SPMI=y
CONFIG_SPMI_MSM_PMIC_ARB=y
CONFIG_MSM_QPNP_INT=y
# CONFIG_MSM_SPMI_DEBUGFS_RO is not set

# Sony Mobile FIPS AES-XTS/AES-CBC Driver
CONFIG_CRYPTO_DEV_SOMC_FIPS_KSCL=y

#
# Random Number Generation
#
CONFIG_CRYPTO_ANSI_CPRNG=m

# Remove TIMER_STATS it "exposes process information across namespaces"
# also disable it in config for good measure
#
# CONFIG_TIMER_STATS is not set

# Android (/ OS) IPC
# disable SYSVIPC since it's not used in Android - at all and can be abused
# causing the system to crash and other malicious attack surfaces
#
# CONFIG_SYSVIPC is not set
# CONFIG_IPC_LOGGING is not set

# disable non-matching config entries & settings:
# CONFIG_ARCH_MSM8992 is not set
# CONFIG_RADIO_SILABS is not set

# disable unnecessary config entries:
# CONFIG_MSM_SMD_DEBUG is not set

# printk: disable the console flush in hotplug path
#
# The thread which initiates the hot plug can get scheduled
# out, while trying to acquire the console lock,
# thus increasing the hot plug latency. This option
# allows to selectively disable the console flush and
# in turn reduce the hot plug latency.
#
# CONFIG_CONSOLE_FLUSH_ON_HOTPLUG

# CPU Frequency scaling
#
CONFIG_CPU_FREQ=y
CONFIG_CPU_FREQ_GOV_COMMON=y
CONFIG_SCHED_FREQ_INPUT=y
CONFIG_CPU_FREQ_STAT=y
# CONFIG_CPU_FREQ_STAT_DETAILS is not set
CONFIG_CPU_FREQ_DEFAULT_GOV_PERFORMANCE=y
# CONFIG_CPU_FREQ_DEFAULT_GOV_POWERSAVE is not set
# CONFIG_CPU_FREQ_DEFAULT_GOV_USERSPACE is not set
# CONFIG_CPU_FREQ_DEFAULT_GOV_ONDEMAND is not set
# CONFIG_CPU_FREQ_DEFAULT_GOV_CONSERVATIVE is not set
# CONFIG_CPU_FREQ_DEFAULT_GOV_INTERACTIVE is not set
CONFIG_CPU_FREQ_GOV_PERFORMANCE=y
CONFIG_CPU_FREQ_GOV_POWERSAVE=y
CONFIG_CPU_FREQ_GOV_USERSPACE=y
CONFIG_CPU_FREQ_GOV_ONDEMAND=y
CONFIG_CPU_FREQ_GOV_INTERACTIVE=y
CONFIG_CPU_FREQ_GOV_CONSERVATIVE=y

# CONFIG_GENERIC_CPUFREQ_CPU0 is not set

# Enable CPUBOOST explicitly, we might disable this later
CONFIG_CPU_BOOST=y
